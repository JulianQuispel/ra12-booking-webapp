import Head from 'next/head'
import { useEffect, useState } from 'react'
import { supabase } from '../lib/initSupabase'
import { User } from '@supabase/supabase-js'
import LoginForm from '../components/LoginForm'
import AvailabilityBooker from '../components/AvailabilityBooker'

export default function Home() {
  const [user, setUser] = useState<User>(null);

  supabase.auth.onAuthStateChange((event) => {
    setUser(supabase.auth.user());
  })

  useEffect(() => {
    if (supabase.auth.user()) {
      setUser(supabase.auth.user())
    }
  }, [])

  return (
    <div className="bg-gray-100 min-h-screen flex justify-center items-center">

      <Head>
        <title>RA12 - boeker</title>
      </Head>

      <div className="w-1/3 flex flex-col items-center">

        <svg className="w-64 h-64 mb-8" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 1200 1200" enable-background="new 0 0 1200 1200">
          <g>
            <g>
              <path fill="#0D5072" d="M140.425,1141.268h-17.154l-22.288-25.562H87.105v25.562h-14.42v-76.588
			c12.127,0,24.253,0.107,36.379,0.107c18.032,0.107,27.535,12.131,27.535,25.348c0,10.492-4.805,21.092-19.341,24.039
			l23.166,26.113V1141.268z M87.105,1078.227v24.467h21.959c9.179,0,13.115-6.109,13.115-12.229s-4.043-12.238-13.115-12.238H87.105
			z"/>
              <path fill="#0D5072" d="M156.666,1119.09c0.868,6.662,6.658,11.473,16.054,11.473c4.917,0,11.365-1.861,14.424-5.023l8.519,8.408
			c-5.673,5.895-14.967,8.736-23.157,8.736c-18.575,0-29.61-11.471-29.61-28.723c0-16.398,11.142-28.189,28.626-28.189
			c18.026,0,29.28,11.141,27.205,33.318H156.666z M185.942,1108.055c-0.873-6.992-6.337-10.492-13.988-10.492
			c-7.21,0-13.106,3.5-15.074,10.492H185.942z"/>
              <path fill="#0D5072" d="M251.245,1081.941l9.833,7.428l-6.008,7.65c4.15,4.693,5.678,10.057,5.678,15.951
			c0,6.662-2.507,16.059-11.36,20.104c8.96,4.479,11.147,10.928,11.147,17.803c0,14.865-11.37,24.039-26.992,24.039
			s-27.312-9.502-27.312-24.039h13.217c0,7.002,6.444,11.588,14.095,11.588c7.651,0,13.658-4.15,13.658-11.588
			c0-7.418-6.991-10.812-13.658-10.812c-16.824,0-27.312-10.268-27.312-27.094c0-16.824,12.237-27.316,27.312-27.316
			c4.258,0,8.635,0.543,12.345,3.064L251.245,1081.941z M219.448,1112.971c0,9.396,6.333,14.973,14.095,14.973
			c7.651,0,13.988-5.682,13.988-14.973c0-9.289-6.337-15.186-13.988-15.186C225.781,1097.785,219.448,1103.574,219.448,1112.971z"/>
              <path fill="#0D5072" d="M283.771,1072.215c0,10.385-15.733,10.385-15.733,0C268.038,1061.838,283.771,1061.838,283.771,1072.215z
			 M269.241,1087.188v54.08h13.32v-54.08H269.241z"/>
              <path fill="#0D5072" d="M329.752,1101.713c-3.825-3.598-8.194-4.801-13.329-4.801c-6.341,0-9.829,1.961-9.829,5.354
			c0,3.5,3.167,5.459,10.047,5.896c10.162,0.658,23.05,2.947,23.05,17.26c0,9.504-7.753,17.699-23.157,17.699
			c-8.524,0-17.042-1.408-24.912-9.611l6.555-9.504c3.821,4.268,12.567,7.43,18.575,7.535c5.028,0.107,9.722-2.512,9.722-6.447
			c0-3.715-3.055-5.238-10.706-5.674c-10.162-0.766-22.289-4.48-22.289-16.727c0-12.443,12.897-16.816,22.73-16.816
			c8.412,0,14.744,1.639,20.975,7.1L329.752,1101.713z"/>
              <path fill="#0D5072" d="M366.981,1072.215v15.301h14.856v11.473h-14.963v23.273c0,5.129,2.836,7.641,6.987,7.641
			c2.08,0,4.48-0.65,6.449-1.629l3.714,11.355c-3.825,1.523-6.992,2.182-11.035,2.297c-11.69,0.438-19.336-6.225-19.336-19.664
			v-23.273h-10.051v-11.473h10.051v-13.875L366.981,1072.215z"/>
              <path fill="#0D5072" d="M403.125,1119.09c0.873,6.662,6.667,11.473,16.059,11.473c4.917,0,11.365-1.861,14.416-5.023l8.523,8.408
			c-5.678,5.895-14.968,8.736-23.157,8.736c-18.579,0-29.614-11.471-29.614-28.723c0-16.398,11.146-28.189,28.63-28.189
			c18.027,0,29.28,11.141,27.205,33.318H403.125z M432.4,1108.055c-0.873-6.992-6.337-10.492-13.988-10.492
			c-7.206,0-13.106,3.5-15.075,10.492H432.4z"/>
              <path fill="#0D5072" d="M467.769,1087.41l0.979,6.225c4.155-6.662,9.726-7.65,15.19-7.65c5.571,0,10.928,2.182,13.872,5.139
			l-6.008,11.57c-2.729-2.289-5.246-3.492-9.619-3.492c-6.987,0-13.436,3.723-13.436,13.664v28.402h-13.324v-53.857H467.769z"/>
              <path fill="#0D5072" d="M545.532,1087.41h12.781v53.857h-12.567l-0.65-7.865c-3.064,6.334-11.477,9.396-17.484,9.504
			c-15.952,0.107-27.749-9.727-27.749-28.625c0-18.57,12.34-28.297,28.078-28.189c7.21,0,14.09,3.385,17.154,8.746L545.532,1087.41z
			 M513.192,1114.281c0,10.27,7.099,16.379,15.952,16.379c20.975,0,20.975-32.652,0-32.652
			C520.291,1098.008,513.192,1104.02,513.192,1114.281z"/>
              <path fill="#0D5072" d="M616.945,1134.383c-6.235,6.119-12.786,8.523-20.762,8.523c-15.627,0-28.621-9.396-28.621-28.51
			c0-19.123,12.994-28.52,28.621-28.52c7.65,0,13.547,2.184,19.443,7.98l-8.408,8.836c-3.171-2.832-7.103-4.248-10.821-4.248
			c-8.956,0-15.507,6.555-15.507,15.951c0,10.26,6.987,15.729,15.293,15.729c4.257,0,8.52-1.211,11.801-4.48L616.945,1134.383z"/>
              <path fill="#0D5072" d="M669.026,1134.383c-6.23,6.119-12.786,8.523-20.753,8.523c-15.631,0-28.63-9.396-28.63-28.51
			c0-19.123,12.999-28.52,28.63-28.52c7.646,0,13.543,2.184,19.443,7.98l-8.412,8.836c-3.171-2.832-7.099-4.248-10.817-4.248
			c-8.96,0-15.515,6.555-15.515,15.951c0,10.26,6.986,15.729,15.301,15.729c4.253,0,8.515-1.211,11.793-4.48L669.026,1134.383z"/>
              <path fill="#0D5072" d="M729.528,1114.396c0,15.506-10.599,28.074-28.078,28.074c-17.483,0-27.971-12.568-27.971-28.074
			c0-15.408,10.706-28.082,27.855-28.082C718.493,1086.314,729.528,1098.988,729.528,1114.396z M686.809,1114.396
			c0,8.186,4.916,15.846,14.642,15.846c9.718,0,14.634-7.66,14.634-15.846c0-8.088-5.678-15.951-14.634-15.951
			C691.836,1098.445,686.809,1106.309,686.809,1114.396z"/>
              <path fill="#0D5072" d="M752.32,1087.41v28.18c0,8.203,4.484,14.42,13.004,14.42c8.193,0,13.77-6.875,13.77-15.07v-27.529h13.217
			v53.965h-11.903l-0.882-7.312c-5.571,5.459-10.705,8.078-18.24,8.078c-12.893,0-22.293-9.727-22.293-26.436v-28.295H752.32z"/>
              <path fill="#0D5072" d="M843.729,1141.268v-28.18c0-8.203-4.476-14.43-12.999-14.43c-8.189,0-13.761,6.885-13.761,15.08v27.529
			h-13.227v-53.975h11.913l0.877,7.322c5.46-5.354,10.924-8.078,17.697-8.078c12.67,0,22.837,9.502,22.837,26.434v28.297H843.729z"
              />
              <path fill="#0D5072" d="M884.997,1072.215v15.301h14.86v11.473h-14.967v23.273c0,5.129,2.841,7.641,6.991,7.641
			c2.075,0,4.476-0.65,6.439-1.629l3.724,11.355c-3.83,1.523-6.996,2.182-11.035,2.297c-11.695,0.438-19.342-6.225-19.342-19.664
			v-23.273h-10.051v-11.473h10.051v-13.875L884.997,1072.215z"/>
              <path fill="#0D5072" d="M952.486,1087.41h12.795v53.857h-12.567l-0.654-7.865c-3.063,6.334-11.477,9.396-17.483,9.504
			c-15.952,0.107-27.754-9.727-27.754-28.625c0-18.57,12.35-28.297,28.083-28.189c7.21,0,14.091,3.385,17.154,8.746L952.486,1087.41
			z M920.151,1114.281c0,10.27,7.104,16.379,15.956,16.379c20.976,0,20.976-32.652,0-32.652
			C927.255,1098.008,920.151,1104.02,920.151,1114.281z"/>
              <path fill="#0D5072" d="M1016.151,1141.268v-28.18c0-8.203-4.476-14.43-12.999-14.43c-8.194,0-13.766,6.885-13.766,15.08v27.529
			h-13.23v-53.975h11.912l0.878,7.322c5.464-5.354,10.928-8.078,17.697-8.078c12.674,0,22.836,9.502,22.836,26.434v28.297H1016.151z
			"/>
              <path fill="#0D5072" d="M1057.415,1072.215v15.301h14.856v11.473h-14.963v23.273c0,5.129,2.837,7.641,6.991,7.641
			c2.071,0,4.48-0.65,6.444-1.629l3.714,11.355c-3.821,1.523-6.987,2.182-11.03,2.297c-11.69,0.438-19.337-6.225-19.337-19.664
			v-23.273h-10.056v-11.473h10.056v-13.875L1057.415,1072.215z"/>
              <path fill="#0D5072" d="M1117.375,1101.713c-3.826-3.598-8.194-4.801-13.334-4.801c-6.332,0-9.832,1.961-9.832,5.354
			c0,3.5,3.17,5.459,10.055,5.896c10.158,0.658,23.051,2.947,23.051,17.26c0,9.504-7.754,17.699-23.162,17.699
			c-8.523,0-17.043-1.408-24.911-9.611l6.555-9.504c3.825,4.268,12.567,7.43,18.575,7.535c5.027,0.107,9.726-2.512,9.726-6.447
			c0-3.715-3.063-5.238-10.706-5.674c-10.162-0.766-22.288-4.48-22.288-16.727c0-12.443,12.888-16.816,22.721-16.816
			c8.421,0,14.749,1.639,20.983,7.1L1117.375,1101.713z"/>
            </g>
            <path fill="#CFA280" d="M1102,733.762C1052,862.845,949.423,964,820.345,1014H1102V733.762z" />
            <path fill="#0D5072" d="M1056.018,338.674C1006.523,209.6,903.821,106.898,774.742,57.404C720.484,36.599,661.58,25.167,600,25.167
		S479.516,36.599,425.257,57.404C296.179,106.898,193.477,209.6,143.983,338.674c-20.806,54.259-32.238,113.163-32.238,174.743
		S123.177,633.9,143.983,688.16c49.493,129.082,152.195,231.784,281.274,281.278c54.263,20.806,113.163,32.237,174.743,32.237
		s120.484-11.432,174.742-32.237c129.079-49.494,231.781-152.196,281.275-281.278c20.805-54.26,32.236-113.163,32.236-174.743
		S1076.822,392.933,1056.018,338.674z"/>
            <g>
              <g>
                <path fill="#CFA280" d="M437.186,675.248h-52.037l-67.614-77.558h-42.097v77.558h-43.754V442.902
				c36.796,0,73.582,0.33,110.377,0.33c54.684,0.334,83.521,36.793,83.521,76.899c0,31.814-14.578,63.967-58.666,72.918
				l70.269,79.216V675.248z M275.438,483.998v74.245h66.624c27.837,0,39.77-18.562,39.77-37.114c0-18.57-12.26-37.131-39.77-37.131
				H275.438z"/>
                <path fill="#CFA280" d="M619.809,631.5H498.492l-19.888,43.748h-47.39l104.071-232.016h47.73l104.074,232.016h-47.727
				L619.809,631.5z M559.15,491.951l-43.085,98.779h86.176L559.15,491.951z"/>
              </g>
              <g>
                <path fill="#FFFFFF" d="M770.445,352.412v34.807h155.117v-36.134h39.776v79.554H770.445v32.152h-37.123V352.412H770.445z" />
                <path fill="#FFFFFF" d="M898.05,488.299c49.058,0.33,70.265,46.737,70.265,89.498c0,46.398-18.883,96.783-73.907,96.783
				c-58.997,0-70.273-44.416-70.273-93.145c0-19.225-4.961-50.375-30.157-50.375h-19.889v144.18h-40.766v-187.93
				c20.219,0,40.437,0,60.983,0c53.368,0,69.275,48.38,69.275,94.125c0,17.573,2.984,49.717,29.837,49.717
				c25.188,0,37.114-22.863,37.114-52.701c0-22.863-11.597-46.399-32.482-46.724V488.299z"/>
              </g>
            </g>
          </g>
        </svg>


        <div className="bg-white w-full rounded-md items-stretch shadow-md">
          <div>
            {!user ? <LoginForm /> : <AvailabilityBooker user={user} />}
          </div>
        </div>

      </div>
    </div>
  )
}
